"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[672],{672:(s,e,t)=>{t.r(e),t.d(e,{default:()=>M});var i=t(2791);const r={ava:"ProfileInfo_ava__2kiHq",profileBlock:"ProfileInfo_profileBlock__nMvag",contacts:"ProfileInfo_contacts__jqWMI"};var o=t(2579),l=t(184);const n=s=>{let[e,t]=(0,i.useState)(!1),[r,o]=(0,i.useState)(s.status);(0,i.useEffect)((()=>{o(s.status)}),[s.status]);return(0,l.jsxs)("div",{children:[!e&&(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Status"}),": ",(0,l.jsx)("span",{onDoubleClick:()=>{t(!0)},children:s.status||"-"})]}),e&&(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:s=>{o(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),s.updateStatus(r)},value:r})})]})};var a=t(4379),d=t(3814),c=t(704),u=t(7983);const h=(0,c.Z)({form:"edit-profile"})((s=>{let{handleSubmit:e,profile:t,error:i}=s;return(0,l.jsxs)("form",{onSubmit:e,children:[i&&(0,l.jsx)("div",{className:u.Z.formSummeryError,children:i}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{children:"Save"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Full Name"}),": ",(0,d.Gr)("Full name","fullName",[],d.II)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Looking for a job"}),": ",(0,d.Gr)("","lookingForAJob",[],d.II,{type:"checkbox"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Description"}),": ",(0,d.Gr)("Description","lookingForAJobDescription",[],d.gx)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"About me"}),": ",(0,d.Gr)("About me","aboutMe",[],d.gx)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:s}),": ",(0,d.Gr)(s,"contacts"+s,[],d.II)]},s)))]})]})})),j=s=>{let{profile:e,isOwner:t,onEditMode:i}=s;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:t&&(0,l.jsx)("button",{onClick:i,children:"Edit"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Full Name"}),":  ",e.fullName]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Looking for a job"}),":  ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Description"}),":  ",e.lookingForAJobDescription]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"About me"}),":  ",e.aboutMe]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("b",{children:"Contacts"}),":  ",Object.keys(e.contacts).map((s=>(0,l.jsx)(x,{contactTitle:s,contactValue:e.contacts[s]},s)))]})]})},x=s=>{let{contactTitle:e,contactValue:t}=s;return(0,l.jsxs)("div",{className:r.contacts,children:[(0,l.jsx)("b",{children:e}),": ",t]})},v=s=>{let{profile:e,status:t,updateStatus:d,isOwner:c,savePhoto:u,saveProfile:x}=s,[v,f]=(0,i.useState)(!1);if(!e)return(0,l.jsx)(o.Z,{});return(0,l.jsxs)("div",{className:r.profileBlock,children:[(0,l.jsxs)("div",{className:r.ava,children:[(0,l.jsx)("img",{src:e.photos.large||a,alt:"!"}),c&&(0,l.jsx)("input",{id:"input",type:"file",onChange:s=>{var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&u(s.target.files[0])}}),v?(0,l.jsx)(h,{initialValues:e,profile:e,onSubmit:s=>{x(s).then((()=>{f(!1)}))}}):(0,l.jsxs)("div",{children:[" ",(0,l.jsx)(j,{profile:e,isOwner:c,onEditMode:()=>{f(!0)}})," "]})]}),(0,l.jsx)("div",{className:r.descriptionBlock,children:(0,l.jsx)(n,{status:t,updateStatus:d})})]})};var f=t(8263);const p="Myposts_posts__Khf9Q",m="Myposts_postsBlock__8xARZ",b="Myposts_likeCountBlock__xoDkI",g="Myposts_massegeBlock__MX3J-",k=s=>(0,l.jsxs)("div",{className:b,children:[(0,l.jsx)("img",{src:a,alt:"!"}),(0,l.jsx)("div",{className:g,children:s.massege}),(0,l.jsx)("div",{className:"likeCount",children:s.likeCount})]}),P=i.memo((s=>{let e=[...s.posts].reverse().map((s=>(0,l.jsx)(k,{massege:s.massege,likeCount:s.likeCount,id:0})));return(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)("div",{children:(0,l.jsx)("h3",{children:"My posts"})}),(0,l.jsx)("div",{children:(0,l.jsx)(S,{onSubmit:e=>{s.addPost(e.newPostText)}})}),(0,l.jsx)("div",{className:p,children:e})]})})),S=(0,c.Z)({form:"ProfileAddNewPostForm"})((s=>(0,l.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,d.Gr)("Yuor post","newPostText",[],d.II),(0,l.jsx)("button",{children:"Add posts"})]}))),_=P;var I=t(8687);const A=(0,I.$j)((s=>({posts:s.profilePage.posts})),{addPost:f.Nw.addPostActionCreator})(_),N=s=>(0,l.jsxs)("div",{children:[(0,l.jsx)(v,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,saveProfile:s.saveProfile}),(0,l.jsx)(A,{})]});var C=t(7689),w=t(2932);const M=(0,t(9050).qC)((0,I.$j)((function(s){var e;return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:null===(e=s.auth.id)||void 0===e?void 0:e.toString(),isAuth:s.auth.isAuth}}),{getUserProfile:f.et,getStatus:f.lR,updateStatus:f.Nf,savePhoto:f.Ju,saveProfile:f.Ii}),w.D)((s=>{const e=(0,C.s0)(),{userId:t}=(0,C.UO)();return(0,i.useEffect)((()=>{t!==s.authorizedUserId&&(()=>{let i=t;var r;if(!i&&(i=null===(r=s.authorizedUserId)||void 0===r?void 0:r.toString(),!i))return void e("/login");i?(s.getUserProfile(+i),s.getStatus(+i)):console.error("ID \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 URI \u0438\u043b\u0438 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 ('authorizedUserId')")})()}),[t,s.authorizedUserId,s.getUserProfile,s.getStatus,e]),(0,l.jsx)(N,{...s,savePhoto:s.savePhoto,isOwner:!t,profile:s.profile,status:s.status,updateStatus:s.updateStatus})}))},2932:(s,e,t)=>{t.d(e,{D:()=>n});t(2791);var i=t(8687),r=t(7689),o=t(184);function l(s){return{isAuth:s.auth.isAuth}}function n(s){return(0,i.$j)(l,{})((e=>{let{isAuth:t,...i}=e;return t?(0,o.jsx)(s,{...i}):(0,o.jsx)(r.Z5,{children:(0,o.jsx)(r.AW,{path:"*",element:(0,o.jsx)(r.Fg,{to:"/login"})})})}))}}}]);
//# sourceMappingURL=672.33ab3ffd.chunk.js.map