"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[160],{1160:(e,s,r)=>{r.r(s),r.d(s,{AddMessageForm:()=>f,Chat:()=>x,ChatPage:()=>u,Message:()=>g,Messages:()=>j});var t=r(5854),c=r(6320),a=r(9060),l=r(5320),n=r(9536),i=r(3344),o=r(7656),h=r(1560),d=r(2496);const u=()=>(0,d.jsx)("div",{children:(0,d.jsx)(x,{})}),x=()=>{const e=(0,n.OY)(),s=(0,n.w1)((e=>e.chat.status)),r=(0,n.w1)(o.CK),t=(0,h.i6)();return(0,a.useEffect)((()=>{r||t("/login")}),[r,t]),(0,a.useEffect)((()=>(e((0,i._m)()),()=>{e((0,i.So)())})),[e]),(0,d.jsxs)("div",{children:["error"===s&&(0,d.jsx)("div",{children:" Some error occured. Please refresh the page"}),(0,d.jsx)(j,{}),(0,d.jsx)(f,{})]})},j=()=>{const e=(0,n.w1)((e=>e.chat.messages)),s=(0,a.useRef)(null),[r,t]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{var e;r&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth",inline:"end"}))}),[r]),(0,d.jsxs)("div",{style:{height:"600px",overflowY:"auto"},onScroll:e=>{let s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop)-s.clientHeight?!r&&t(!0):r&&t(!1)},children:[e.map((e=>(0,d.jsx)(g,{message:e},e.userId))),(0,d.jsx)("div",{ref:s})]})},g=a.memo((e=>{let{message:s}=e;return(0,d.jsxs)("div",{children:[(0,d.jsx)(t.c,{icon:(0,d.jsx)(l.c,{}),src:s.photo,style:{width:"30px"}}),(0,d.jsx)("b",{children:s.userName}),(0,d.jsx)("p",{children:s.message}),(0,d.jsx)("hr",{})]})})),f=()=>{const[e,s]=(0,a.useState)(""),r=(0,n.OY)(),t=(0,n.w1)((e=>e.chat.status));return(0,d.jsxs)("div",{children:[(0,d.jsx)("textarea",{onChange:e=>s(e.currentTarget.value),value:e}),(0,d.jsx)(c.cp,{disabled:"ready"!==t,onClick:()=>{e&&(r((0,i.Yf)(e)),s(""))},children:"Send"})]})}}}]);
//# sourceMappingURL=160.338cc4e2.chunk.js.map