"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[218],{5218:(s,e,t)=>{t.r(e),t.d(e,{default:()=>O});var r=t(2791);const i={ava:"ProfileInfo_ava__2kiHq",profileBlock:"ProfileInfo_profileBlock__nMvag",contacts:"ProfileInfo_contacts__jqWMI"};var o=t(5397),n=t(184);const l=s=>{let[e,t]=(0,r.useState)(!1),[i,o]=(0,r.useState)(s.status);(0,r.useEffect)((()=>{o(s.status)}),[s.status]);return(0,n.jsxs)("div",{children:[!e&&(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Status"}),": ",(0,n.jsx)("span",{onDoubleClick:()=>{t(!0)},children:s.status||"-"})]}),e&&(0,n.jsx)("div",{children:(0,n.jsx)("input",{onChange:s=>{o(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{t(!1),s.updateStatus(i)},value:i})})]})};var a=t(4379),c=t(3655),d=t(704),u=t(7983);const h=(0,d.Z)({form:"edit-profile"})((s=>{let{handleSubmit:e,profile:t,error:r}=s;return(0,n.jsxs)("form",{onSubmit:e,children:[r&&(0,n.jsx)("div",{className:u.Z.formSummeryError,children:r}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{children:"Save"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Full Name"}),": ",(0,c.Gr)("Full name","fullName",[],c.II)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Looking for a job"}),": ",(0,c.Gr)("","lookingForAJob",[],c.II,{type:"checkbox"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Description"}),": ",(0,c.Gr)("Description","lookingForAJobDescription",[],c.gx)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"About me"}),": ",(0,c.Gr)("About me","aboutMe",[],c.gx)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((s=>(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:s}),": ",(0,c.Gr)(s,"contacts"+s,[],c.II)]},s)))]})]})})),p=s=>{let{profile:e,isOwner:t,onEditMode:r}=s;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:t&&(0,n.jsx)("button",{onClick:r,children:"Edit"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Full Name"}),":  ",e.fullName]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Looking for a job"}),":  ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Description"}),":  ",e.lookingForAJobDescription]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"About me"}),":  ",e.aboutMe]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Contacts"}),":  ",Object.keys(e.contacts).map((s=>(0,n.jsx)(x,{contactTitle:s,contactValue:e.contacts[s]},s)))]})]})},x=s=>{let{contactTitle:e,contactValue:t}=s;return(0,n.jsxs)("div",{className:i.contacts,children:[(0,n.jsx)("b",{children:e}),": ",t]})},j=s=>{let{profile:e,status:t,updateStatus:c,isOwner:d,savePhoto:u,saveProfile:x}=s,[j,f]=(0,r.useState)(!1);if(!e)return(0,n.jsx)(o.Z,{});return(0,n.jsxs)("div",{className:i.profileBlock,children:[(0,n.jsxs)("div",{className:i.ava,children:[(0,n.jsx)("img",{src:e.photos.large||a,alt:"!"}),d&&(0,n.jsx)("input",{id:"input",type:"file",onChange:s=>{s.target.files.length&&u(s.target.files[0])}}),j?(0,n.jsx)(h,{initialValues:e,profile:e,onSubmit:s=>{x(s).then((()=>{f(!1)}))}}):(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(p,{profile:e,isOwner:d,onEditMode:()=>{f(!0)}})," "]})]}),(0,n.jsx)("div",{className:i.descriptionBlock,children:(0,n.jsx)(l,{status:t,updateStatus:c})})]})};var f=t(6508);const v="Myposts_posts__Khf9Q",m="Myposts_postsBlock__8xARZ",b="Myposts_likeCountBlock__xoDkI",g="Myposts_massegeBlock__MX3J-";var k=t(6139),P=t(5304);const _=s=>(0,n.jsxs)("div",{className:b,children:[(0,n.jsx)("img",{src:a,alt:"!"}),(0,n.jsx)("div",{className:g,children:s.massege}),(0,n.jsx)("div",{className:"likeCount",children:s.likeCount})]}),S=r.memo((s=>{let e=[...s.posts].reverse().map((s=>(0,n.jsx)(_,{massege:s.massege,likeCount:s.likeCount})));return(0,n.jsxs)("div",{className:m,children:[(0,n.jsx)("div",{children:(0,n.jsx)("h3",{children:"My posts"})}),(0,n.jsx)("div",{children:(0,n.jsx)(A,{onSubmit:e=>{s.addPost(e.newPostText)}})}),(0,n.jsx)("div",{className:v,children:e})]})})),A=(0,d.Z)({form:"ProfileAddNewPostForm"})((s=>(0,n.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,n.jsx)(k.Z,{name:"newPostText",component:c.gx,validate:[P.C,(0,P.D)(10)]}),(0,n.jsx)("button",{children:"Add posts"})]}))),I=S;var C=t(8687);const N=(0,C.$j)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText})),(s=>({addPost:e=>{s((0,f.Wl)(e))}})))(I),w=s=>(0,n.jsxs)("div",{children:[(0,n.jsx)(j,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,saveProfile:s.saveProfile}),(0,n.jsx)(N,{})]});var M=t(7689),D=t(1548),F=t(9050);class y extends r.Component{refreshProfile(){let s=this.props.params.userId;s||(s=this.props.authorizedUserId,s||(M.Z5,M.AW,M.Fg)),this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e){this.props.params.userId!==s.params.userId&&this.refreshProfile()}render(){return(0,n.jsx)(w,{...this.props,savePhoto:this.props.savePhoto,isOwner:!this.props.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus})}}const O=(0,F.qC)((0,C.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth}}),{getUserProfile:f.et,getStatus:f.lR,updateStatus:f.Nf,savePhoto:f.Ju,saveProfile:f.Ii}),(s=>e=>{const t=(0,M.UO)();return(0,n.jsx)(s,{...e,params:t})}),D.D)(y)},1548:(s,e,t)=>{t.d(e,{D:()=>a});var r=t(2791),i=t(8687),o=t(7689),n=t(184);function l(s){return{isAuth:s.auth.isAuth}}const a=s=>{class e extends r.Component{render(){return this.props.isAuth?(0,n.jsx)(s,{...this.props}):(0,n.jsx)(o.Z5,{children:(0,n.jsx)(o.AW,{path:"*",element:(0,n.jsx)(o.Fg,{to:"/login"})})})}}return(0,i.$j)(l)(e)}}}]);
//# sourceMappingURL=218.de4c995a.chunk.js.map