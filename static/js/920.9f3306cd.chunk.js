"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[920],{3540:(e,s,i)=>{i.r(s),i.d(s,{ProfileContainer:()=>I});var t=i(9060);const r={ava:"ProfileInfo_ava__he39s",profileBlock:"ProfileInfo_profileBlock__FMO5n",contacts:"ProfileInfo_contacts__H-P--"};var o=i(3856),l=i(9536),n=i(8828),c=i(2496);const a=e=>{let[s,i]=(0,t.useState)(!1),[r,o]=(0,t.useState)(e.status);const a=(0,l.OY)();(0,t.useEffect)((()=>{o(e.status)}),[e.status]);return(0,c.jsxs)("div",{style:{color:"#DBDEE1"},children:[!s&&(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Status"}),": ",(0,c.jsx)("span",{onDoubleClick:()=>{i(!0)},children:e.status||"-"})]}),s&&(0,c.jsx)("div",{children:(0,c.jsx)("input",{onChange:e=>{o(e.currentTarget.value)},autoFocus:!0,onBlur:()=>{i(!1),a((0,n.u6)(r))},value:r})})]})};var d=i(6948),j=i(1052),u=i(9464),x=i(3772),h=i(6320);const p=(0,u.c)({form:"edit-profile",enableReinitialize:!0})((e=>{let{handleSubmit:s,profile:i,error:t}=e;return(0,c.jsxs)("form",{onSubmit:s,children:[t&&(0,c.jsx)("div",{className:x.c.formSummeryError,children:t}),(0,c.jsx)("div",{children:(0,c.jsx)(h.cp,{onClick:s,children:"Save"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Full Name"}),": ",(0,j.Ks)("Full name","fullName",[],j.EF)]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Looking for a job"}),": ",(0,j.Ks)("","lookingForAJob",[],j.EF,{type:"checkbox"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Description"}),": ",(0,j.Ks)("Description","lookingForAJobDescription",[],j.Aj)]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"About me"}),": ",(0,j.Ks)("About me","aboutMe",[],j.Aj)]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Contacts"}),": ",Object.keys(i.contacts).map((e=>(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:e}),": ",(0,j.Ks)(e,"contacts"+e,[],j.EF)]},e)))]})]})})),m=e=>e.profilePage.profile,v=e=>e.profilePage.status;var f=i(456),b=i(9696),g=i(5680),k=i(808);const y=()=>{const[e,s]=(0,t.useState)(!1),[i,r]=(0,t.useState)(),o=(0,l.OY)(),a=(0,c.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[e?(0,c.jsx)(f.c,{}):(0,c.jsx)(b.c,{}),(0,c.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(k.c,{name:"avatar",listType:"picture-circle",className:"avatar-uploader",showUploadList:!1,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",beforeUpload:e=>{const s="image/jpeg"===e.type||"image/png"===e.type;s||g.cp.error("You can only upload JPG/PNG file!");const i=e.size/1024/1024<2;return i||g.cp.error("Image must smaller than 2MB!"),e&&o((0,n.Eb)(e)),s&&i},onChange:e=>{"uploading"!==e.file.status?"done"===e.file.status&&((e,s)=>{const i=new FileReader;i.addEventListener("load",(()=>s(i.result))),i.readAsDataURL(e)})(e.file.originFileObj,(()=>{s(!1)})):s(!0)},children:i?(0,c.jsx)("img",{src:i,alt:"avatar",style:{width:"100%"}}):a})})},w=e=>{let{profile:s,isOwner:i,onEditMode:t}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:i&&(0,c.jsx)(h.cp,{onClick:t,children:"Edit"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Full Name"}),":  ",s.fullName]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Looking for a job"}),":  ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Description"}),":  ",s.lookingForAJobDescription]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"About me"}),":  ",s.aboutMe]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Contacts"}),":  ",Object.keys(s.contacts).map((e=>(0,c.jsx)(_,{contactTitle:e,contactValue:s.contacts[e]},e)))]})]})},_=e=>{let{contactTitle:s,contactValue:i}=e;return(0,c.jsxs)("div",{className:r.contacts,children:[(0,c.jsx)("b",{children:s}),": ",i]})},C=e=>{let{isOwner:s}=e;const i=(0,l.w1)(m),j=(0,l.w1)(v),u=(0,l.OY)();let[x,h]=(0,t.useState)(!1);if(!i)return(0,c.jsx)(o.c,{});return(0,c.jsxs)("div",{className:r.profileBlock,children:[(0,c.jsxs)("div",{className:r.ava,children:[(0,c.jsx)("img",{src:i.photos.large||d,alt:"!"}),s&&x&&(0,c.jsx)(y,{}),x?(0,c.jsx)(p,{initialValues:i,profile:i,onSubmit:e=>{u((0,n.BV)(e)).then((()=>{h(!1)}))}}):(0,c.jsxs)("div",{children:[" ",(0,c.jsx)(w,{profile:i,isOwner:s,onEditMode:()=>{h(!0)}})," "]})]}),(0,c.jsx)("div",{className:r.descriptionBlock,children:(0,c.jsx)(a,{status:j})})]})},F="Myposts_posts__fAIRV",A="Myposts_likeCountBlock__he3TU",N="Myposts_massegeBlock__kgmlz",E=e=>(0,c.jsxs)("div",{className:A,children:[(0,c.jsx)("img",{src:d,alt:"!"}),(0,c.jsx)("div",{className:N,children:e.massege}),(0,c.jsx)("div",{className:"likeCount",children:e.likeCount})]}),O=t.memo((()=>{const e=(0,l.w1)((e=>e.profilePage.posts)),s=(0,l.OY)();let i=[...e].reverse().map((e=>(0,c.jsx)(E,{massege:e.massege,likeCount:e.likeCount,id:0})));return(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{style:{textAlign:"center"},children:"My posts"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{children:(0,c.jsx)(P,{onSubmit:e=>{s(n.ay.addPostActionCreator(e.newPostText))}})})]}),(0,c.jsx)("div",{className:F,style:{height:"300px",overflowY:"auto"},children:i})]})})),P=(0,u.c)({form:"ProfileAddNewPostForm"})((e=>(0,c.jsx)("form",{children:(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,j.Ks)("Yuor post","newPostText",[],j.EF),(0,c.jsx)(h.cp,{onClick:e.handleSubmit,children:"Add posts"})]})}))),S=O,B=e=>(0,c.jsxs)("div",{children:[(0,c.jsx)(C,{isOwner:e.isOwner}),(0,c.jsx)(S,{})]});var D=i(1560),M=i(7656);const I=()=>{const e=(0,l.w1)(M.u0),s=(0,l.w1)(M.CK),i=(0,D.i6)(),r=(0,l.OY)(),{userId:o}=(0,D.W4)();return(0,t.useEffect)((()=>{o!==e&&(()=>{let s=o;s||(s=null===e||void 0===e?void 0:e.toString()),s?(r((0,n.mU)(+s)),r((0,n.g3)(+s))):console.error("ID \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 URI \u0438\u043b\u0438 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 ('authorizedUserId')")})()}),[o,e,n.mU,n.g3]),(0,t.useEffect)((()=>{s||i("/login")}),[s,i]),(0,c.jsx)(B,{isOwner:!o})}}}]);
//# sourceMappingURL=920.9f3306cd.chunk.js.map