"use strict";(self.webpackChunkfirst_project=self.webpackChunkfirst_project||[]).push([[398],{2398:(e,s,t)=>{t.r(s),t.d(s,{AddMessageForm:()=>w,Chat:()=>v,Message:()=>A,Messages:()=>y});var r=t(2245),l=t(4e3),n=t(4460),a=t(8223),o=t(5043),c=t(3722),i=t(8168);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};var h=t(2172),g=function(e,s){return o.createElement(h.A,(0,i.A)({},e,{ref:s,icon:d}))};const u=o.forwardRef(g);var x=t(9456),f=t(2845),p=t(9171),m=t(3216),j=t(579);const v=()=>{const e=(0,x.wA)(),s=(0,x.d4)((e=>e.chat.status)),t=(0,x.d4)(p.BN),r=(0,m.Zp)();return(0,o.useEffect)((()=>{t||r("/login")}),[t,r]),(0,o.useEffect)((()=>(e((0,f.R7)()),()=>{e((0,f.Bs)())})),[e]),(0,j.jsxs)("div",{children:["error"===s&&(0,j.jsx)("div",{children:" Some error occured. Please refresh the page"}),(0,j.jsx)(y,{}),(0,j.jsx)(w,{})]})},y=()=>{const e=(0,x.d4)((e=>e.chat.messages)),s=(0,o.useRef)(null),[t,r]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{var e;t&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth",inline:"end"}))}),[t]),(0,j.jsxs)("div",{style:{height:"78vh",overflowY:"auto"},onScroll:e=>{let s=e.currentTarget;const t=s.scrollHeight-s.scrollTop===s.clientHeight;r(t)},children:[e.map((e=>(0,j.jsx)(A,{message:e},e.userId))),(0,j.jsx)("div",{ref:s})]})},A=o.memo((e=>{let{message:s}=e;return(0,j.jsxs)("div",{style:{margin:"20px",display:"flex",alignItems:"center"},children:[(0,j.jsx)(r.A,{icon:(0,j.jsx)(c.A,{}),src:s.photo,style:{width:"30px",marginRight:"10px"}}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:(0,j.jsx)("b",{style:{marginRight:"10px"},children:s.userName})}),(0,j.jsx)("p",{style:{marginBottom:"5px"},children:s.message})]})]})})),w=()=>{const[e,s]=(0,o.useState)(""),t=(0,x.wA)(),r=(0,x.d4)((e=>e.chat.status));return(0,j.jsx)(l.A,{onFinish:()=>{console.log(r),e&&(console.log(e),t((0,f._z)(e)),s(""))},layout:"inline",style:{paddingTop:"10px"},children:(0,j.jsx)(l.A.Item,{style:{width:"100%"},children:(0,j.jsx)(n.A,{suffix:(0,j.jsx)(a.Ay,{type:"text",style:{backgroundColor:"transparent",color:"#fff",textAlign:"center",display:"flex",alignItems:"center",left:"15px"},children:(0,j.jsx)(u,{})}),disabled:"ready"!==r,style:{backgroundColor:"#383A40",border:"none",color:"#C7CACE"},placeholder:"Write",onChange:e=>s(e.currentTarget.value),value:e})})})}}}]);
//# sourceMappingURL=398.5d5af670.chunk.js.map